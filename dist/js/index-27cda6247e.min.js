function http(e){e=e||{};var t="https://m.sit.nonobank.com",n=/nonobank.com|mingxiaodai.com/.test(location.host)?location.protocol+"//"+location.host+(location.port?":"+location.port:""):t;n+="/feserver";var o=axios.create({baseURL:e.host||n,timeout:e.timeout||5e3}),r=new Event("loading"),i=new Event("loaded");return o.defaults.headers.common["Content-Type"]="application/json",o.interceptors.request.use(function(e){if(e.isJwt){var t=sessionStorage.getItem("invite-jwt");e.headers.jwt=t}if(e.silence||document.dispatchEvent(r),!e.isTime){var n=new EncryptSign;"get"==e.method?e.params=n.sign(e.params):e.data=n.sign(e.data)}return e},function(e){return Promise.reject(e)}),o.interceptors.response.use(function(e){return document.dispatchEvent(i),e.data},function(e){var e=new CustomEvent("error",{detail:"网络不给力呦~"});return e.response&&404===e.response.status?void document.dispatchEvent(e):void 0==e.response?void document.dispatchEvent(e):Promise.reject(e)}),o}!function(){function e(){var e=String.prototype.replace,t=/%20/g;return{"default":"RFC3986",formatters:{RFC1738:function(n){return e.call(n,t,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}}function t(){var e=this,t=Object.prototype.hasOwnProperty,n=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}();return e.arrayToObject=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)"undefined"!=typeof e[o]&&(n[o]=e[o]);return n},e.merge=function(n,o,r){if(!o)return n;if("object"!=typeof o){if(Array.isArray(n))n.push(o);else{if("object"!=typeof n)return[n,o];(r.plainObjects||r.allowPrototypes||!t.call(Object.prototype,o))&&(n[o]=!0)}return n}if("object"!=typeof n)return[n].concat(o);var i=n;return Array.isArray(n)&&!Array.isArray(o)&&(i=e.arrayToObject(n,r)),Array.isArray(n)&&Array.isArray(o)?(o.forEach(function(o,i){t.call(n,i)?n[i]&&"object"==typeof n[i]?n[i]=e.merge(n[i],o,r):n.push(o):n[i]=o}),n):Object.keys(o).reduce(function(t,n){var i=o[n];return Object.prototype.hasOwnProperty.call(t,n)?t[n]=e.merge(t[n],i,r):t[n]=i,t},i)},e.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},e.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),o="",r=0;r<t.length;++r){var i=t.charCodeAt(r);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?o+=t.charAt(r):i<128?o+=n[i]:i<2048?o+=n[192|i>>6]+n[128|63&i]:i<55296||i>=57344?o+=n[224|i>>12]+n[128|i>>6&63]+n[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(r)),o+=n[240|i>>18]+n[128|i>>12&63]+n[128|i>>6&63]+n[128|63&i])}return o},e.compact=function(t,n){if("object"!=typeof t||null===t)return t;var o=n||[],r=o.indexOf(t);if(r!==-1)return o[r];if(o.push(t),Array.isArray(t)){for(var i=[],a=0;a<t.length;++a)t[a]&&"object"==typeof t[a]?i.push(e.compact(t[a],o)):"undefined"!=typeof t[a]&&i.push(t[a]);return i}var c=Object.keys(t);return c.forEach(function(n){t[n]=e.compact(t[n],o)}),t},e.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},e.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},e}function n(){var n=e(),o=t(),r={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},i=Date.prototype.toISOString,a={delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,serializeDate:function(e){return i.call(e)},skipNulls:!1,strictNullHandling:!1},c=function s(e,t,n,r,i,a,c,u,f,d,l,p){var m=e;if("function"==typeof c)m=c(t,m);else if(m instanceof Date)m=d(m);else if(null===m){if(r)return a&&!p?a(t):t;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||o.isBuffer(m)){if(a){var g=p?t:a(t);return[l(g)+"="+l(a(m))]}return[l(t)+"="+l(String(m))]}var h=[];if("undefined"==typeof m)return h;var y;if(Array.isArray(c))y=c;else{var v=Object.keys(m);y=u?v.sort(u):v}for(var w=0;w<y.length;++w){var b=y[w];i&&null===m[b]||(h=Array.isArray(m)?h.concat(s(m[b],n(t,b),n,r,i,a,c,u,f,d,l,p)):h.concat(s(m[b],t+(f?"."+b:"["+b+"]"),n,r,i,a,c,u,f,d,l,p)))}return h};return function(e,t){var o=e,i=t||{};if(null!==i.encoder&&void 0!==i.encoder&&"function"!=typeof i.encoder)throw new TypeError("Encoder has to be a function.");var s="undefined"==typeof i.delimiter?a.delimiter:i.delimiter,u="boolean"==typeof i.strictNullHandling?i.strictNullHandling:a.strictNullHandling,f="boolean"==typeof i.skipNulls?i.skipNulls:a.skipNulls,d="boolean"==typeof i.encode?i.encode:a.encode,l="function"==typeof i.encoder?i.encoder:a.encoder,p="function"==typeof i.sort?i.sort:null,m="undefined"!=typeof i.allowDots&&i.allowDots,g="function"==typeof i.serializeDate?i.serializeDate:a.serializeDate,h="boolean"==typeof i.encodeValuesOnly?i.encodeValuesOnly:a.encodeValuesOnly;if("undefined"==typeof i.format)i.format=n["default"];else if(!Object.prototype.hasOwnProperty.call(n.formatters,i.format))throw new TypeError("Unknown format option provided.");var y,v,w=n.formatters[i.format];"function"==typeof i.filter?(v=i.filter,o=v("",o)):Array.isArray(i.filter)&&(v=i.filter,y=v);var b=[];if("object"!=typeof o||null===o)return"";var C;C=i.arrayFormat in r?i.arrayFormat:"indices"in i?i.indices?"indices":"repeat":"indices";var j=r[C];y||(y=Object.keys(o)),p&&y.sort(p);for(var E=0;E<y.length;++E){var S=y[E];f&&null===o[S]||(b=b.concat(c(o[S],S,j,u,f,d?l:null,v,p,m,g,w,h)))}return b.join(s)}}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var o={stringify:n()};window.qs=o}(),function(){function e(e,t){return e.localeCompare(t)}function t(e){var t=sessionStorage.getItem(e);try{return JSON.parse(t)}catch(n){return t}}function n(){this.keyName=[[115,105,103,110,97,116,117,114,101],[110,111,110,99,101,115,116,114],[97,112,112,73,100],[116,105,109,101,115,116,97,109,112]]}n.prototype.getKeyName=function(e){for(var t="",n=0;n<this.keyName[e].length;n++)t+=String.fromCharCode(this.keyName[e][n]);return t},n.prototype.sign=function(n){n=n||{},n[this.getKeyName(1)]=Math.random().toString(36).substr(2,15),n[this.getKeyName(3)]=Date.now()+ +t("invite-offsetTime");var o=qs.stringify(n,{allowDots:!0,arrayFormat:"repeat",sort:e,encode:!0});return n[this.getKeyName(2)]="nono",o+=md5(n[this.getKeyName(2)]).substr(7,16),n[this.getKeyName(0)]=md5(o),n},window.EncryptSign=n}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}try{new Event("test")}catch(t){window.Event=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(){function e(e,t){try{"object"==typeof t&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}catch(n){Storage.prototype._setItem=Storage.prototype.setItem,Storage.prototype.setItem=function(){},alert("请不要在无痕模式下打开")}}function t(){if(""==window.location.search)return!1;for(var e={},t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o++){var r=n[o].split("=");if("undefined"==typeof e[r[0]])e[r[0]]=decodeURIComponent(r[1]);else if("string"==typeof e[r[0]]){var i=[e[r[0]],decodeURIComponent(r[1])];e[r[0]]=i}else e[r[0]].push(decodeURIComponent(r[1]))}return e}function n(e,t){document.addEventListener?document.addEventListener(e,function(e){t(e)},!1):document.attachEvent("on"+e,function(e){t(e)})}function o(e){v.toastMsg=e.detail,v.isLoading=!1}var r,i=navigator.userAgent.toLowerCase(),a=(i.toLowerCase().indexOf("android")>-1||i.toLowerCase().indexOf("adr")>-1,/micromessenger/.test(i),t().am_id||t().utm_source||""),c=t().approach||t().utm_term||"",s=t().approach2||t().utm_content||"",u=t().approach3||t().utm_campaign||"",f=(t().landing_page||"nonobank",t().mobile||""),d=t().regtime||"",l=t().balance||"",p=0,m=null,g=0,h=localStorage.getItem("tongdun_token"),y=new http;Vue.component("loading",{props:{show:{type:Boolean,"default":!1}},template:"<section class='popup row row-center' v-if='show'><span class='loading row row-center'><img src='images/loading.gif' width='26'></span></section>"}),Vue.directive("focus",{inserted:function(e,t){t.value&&e.focus()},componentUpdated:function(e,t){t.modifiers.lazy&&Boolean(t.value)===Boolean(t.oldValue)||t.value&&e.focus()}});var v=new Vue({el:"#app",data:{user:{phone:"",codeImg:"",codeMsg:"",agreement:!0},imgSrc:"",timeCount:-1,isImgCode:!1,limTime:!1,isWelfare:!1,errorMsg:"",focusStatus:0,jwt:"",amount:"",invitees:[],isLoading:!1},watch:{"user.phone":function(e,t){v.focusStatus=0,p=0,11==e.length&&(v.checkPhone(),0==p&&y.get("/common/check/mobile/"+e,{silence:!0}).then(function(e){e.succeed&&(e.data.exists?(v.errorMsg="*手机号已注册",p=3):(p=0,v.focusStatus=1))})),g>=1&&(g=0,v.focusStatus=0,v.user.codeImg="",v.user.codeMsg="",v.timeCount=-1,setTimeout(function(){clearTimeout(m),v.refreshCaptcha()},0))},"user.codeImg":function(e,t){if(4==e.length)if(v.focusStatus=0,v.checkPhone(),0==p){var n={uuid:r,captcha:e};y.get("/common/captcha/verify",{params:n,silence:!0}).then(function(e){e&&e.succeed&&(e.data.valid?v.getCode():(v.errorMsg="*请输入正确的验证码",v.refreshCaptcha()))})}else v.user.codeImg="",v.focusStatus=3,v.timeCount==-1&&v.refreshCaptcha()}},methods:{init:function(){var e=this;+d>=100&&(e.limTime=d),+l>0&&(e.isWelfare=!0),this.getTime()},getTime:function(){y.get("/common/current",{isTime:!0}).then(function(e){e.succeed&&(v.setTime(e.data.timestamp),v.refreshCaptcha())})},setTime:function(t){var n=t-Date.now();e("invite-offsetTime",n)},refreshCaptcha:function(){v.user.codeImg="",y.get("/common/captcha",{silence:!0}).then(function(e){if(e.succeed){var t=e.data;v.imgSrc=t.captcha,r=t.uuid}else v.errorMsg=e.errorMessage})},checkPhone:function(){var e=/1[345789]\d{9}$/;return this.user.phone.length?e.test(this.user.phone)?void(3==p&&(this.errorMsg="*手机号已注册")):(this.errorMsg="*请输入正确的手机号",void(p=1)):(this.errorMsg="*请输入手机号",void(p=1))},clearError:function(){this.errorMsg=""},countDown:function(e){this.focusStatus=0,e>=0&&(v.timeCount=e,e--,m=setTimeout(function(){v.countDown(e)},1e3))},getCode:function(){var e={mobile:v.user.phone,captcha:v.user.codeImg,uuid:r,codeType:0,tokenId:h};y.post("/user/v-code",e,{silence:!0}).then(function(e){e&&e.succeed?(g+=1,v.timeCount=60,v.countDown(v.timeCount),setTimeout(function(){v.focusStatus=2},100)):(g=0,v.focusStatus=1,v.user.codeImg="",v.user.codeMsg="",v.timeCount=-1,setTimeout(function(){clearTimeout(m),v.refreshCaptcha()},0))})},doRegister:function(){var t={inviteMobile:f,mobile:v.user.phone,vcode:v.user.codeMsg,tokenId:h,uuid:r,captcha:v.user.codeImg,amId:a,approach:c,approach2:s,approach3:u};y.post("/user/register",t).then(function(t){t.succeed?(e("invite-jwt",t.data.jwt),location.href="regsuccess.html?balance="+l):"0100154"==t.errorCode?v.errorMsg="*请输入正确的验证码":v.errorMsg=t.errorMessage})},submit:function(){if(_czc.push(["_trackEvent","注册页","点击","领取按钮"]),v.checkPhone(),0==p)return this.user.codeImg.length<4||this.user.codeMsg.length<4?void(v.errorMsg="*请输入正确的验证码"):this.user.agreement?void v.doRegister():void(v.errorMsg="*请阅读并勾选相关协议")}}});v.init(),n("loading",function(){v.isLoading=!0}),n("loaded",function(){v.isLoading=!1}),n("error",o)}();
//# sourceMappingURL=../map/js/index-27cda6247e.min.js.map
